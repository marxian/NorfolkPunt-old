{% extends "localboats/base.html" %}
{% load humanize %}

{% block title %}{{ block.super }} : Events{% endblock title %}

{% block styles %}
	<link rel="stylesheet" type="text/css" href="/site_media/css/isotope.css">
{% endblock styles %}

{% block content %}
	<nav id="list-options" class="white80 shadow">
      <h3>Show:</h3>
      <ul id="filter" class="option-set"> 
		<li><a href="#future" data-filter=".future" class="selected">Future</a></li>
		<li><a href="#past" data-filter=".past">Past</a></li>
		<li><a href="#results" data-filter=".results">Results</a></li>
      </ul>
  	</nav>

	<ul id="super-list" class="fitRows clearfix">
	{% for event in future %}
	    <li id="{{ event.slug }}" 
			class="event {{ event.type|slugify }} {% if event.results.count %}results{% endif %} future"
			data-start="{{ event.start }}"
			data-results="{{ event.results.count }}"
			data-tense="future"
			>
			<span class="type {{event.type|slugify}}">{{event.type}}</span>
	    	<h2><a href="{{ event.get_absolute_url }}">
			  {{ event.name }}
			</a></h2>
			<em>({{event.start}}{% if event.end %} to {{event.end}}{% endif %})</em>
		</li>
	{% endfor %}
	{% for event in past %}
	    <li id="{{ event.slug }}" 
			class="event {{ event.type|slugify }} {% if event.results.count %}results{% endif %} past"
			data-start="{{ event.start }}"
			data-results="{{ event.results.count }}"
			data-tense="past"
			>
			<span class="type {{event.type|slugify}}">{{event.type}}</span>
	    	<h2><a href="{{ event.get_absolute_url }}">
			  {{ event.name }}
			</a></h2>
			<em>({{event.start}}{% if event.end %} to {{event.end}}{% endif %})</em>
		</li>
	{% endfor %}
	</ul> 
{% endblock content %}

{% block scripts %}
	<script type="text/javascript" src="/site_media/js/jquery.isotope.min.js"></script>
	<script>
		$list = $('#super-list');
  
		$('#filter a').live('click',function(){
		  var filterName = $(this).attr('data-filter');
		  $list.isotope({ filter : filterName });
		  return false;
		});
		
		
		
		var currentLayout = 'straightDown';
		
		
		  
		// switches selected class on buttons
		$('#list-options').find('.option-set a').live('click', function(){
			var $this = $(this);
			
			// don't proceed if already selected
			if ( !$this.hasClass('selected') ) {
			  $this.parents('.option-set').find('.selected').removeClass('selected');
			  $this.addClass('selected');
			}
		});
		
		$(function(){
		  
		  $list.isotope({
		    layoutMode : 'straightDown',
		    filter: '.future',
		    masonry : {
		      columnWidth: 220
		    },
		    getSortData : {
			  name : function( $elem ) {
				return $($elem).find('a:first').text();
			  }
		    }
		  });
		  
		});

	</script>
{% endblock scripts %}




